# S1 – Servidor NGINX como proxy inverso y balanceador de carga

## Objetivo de S1
Configuramos el servidor S1 con NGINX dentro de Docker para que reciba todas las peticiones HTTP de los clientes y actúe como proxy inverso, repartiendo la carga entre los contenedores S2 y S3 que ejecutan extagram.php.
​
Además, definir las rutas necesarias para redirigir correctamente el tráfico hacia la parte dinámica (S2–S3 y S4) y la parte estática (S5 y S6), dejando preparada la arquitectura de alta disponibilidad descrita en el enunciado del proyecto.

## Configuración y Funcionamiento de S1
- **Despliegue del Contenedor:** Comando base para ejecutar el contenedor S1. Se utiliza el volumen en modo read-only (:ro) para asegurar que el contenedor no modifique accidentalmente la configuración maestra
  ```sql
  docker run -d \
    --name s1-s1-nginx-1 \
    --network red_extagram \
    -p 80:80 \
    -v ~/sprint2/S1/conf/extagram.conf:/etc/nginx/conf.d/default.conf:ro \
    nginx:latest
  ```
- **Estructura del contenedor:**
  ```sql
  S1/
  ├── docker-compose.yml   
  ├── extagram.php         
  └── s1-nginx/            
      ├── Dockerfile       
      └── extagram.conf    
  ```
  | Fichero | Función Técnica |
  |--------|------|
  | docker-compose.yml | Orquestrador: Define la red interna, los volúmenes compartidos y el orden de arranque de todos los contenedores (S1-S7). |
  | extagram.php | Interfaz de Usuario: Archivo principal que contiene el formulario de carga y la lógica para mostrar el feed de publicaciones desde la base de datos. |
  | s1-nginx/Dockerfile | Configurador de Imagen: Construye el servidor Nginx personalizado con las rutas de balanceo de carga. |
  | s1-nginx/extagram.conf | Motor de Rutas: Define que /storage/ va a S5, /static/ va a S6, y los ficheros .php se reparten entre S2 y S3. |
  
