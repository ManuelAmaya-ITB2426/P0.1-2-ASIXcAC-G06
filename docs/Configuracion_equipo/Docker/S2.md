# S2 – Servidor de Aplicación PHP-FPM (Nodo 1)

## Objetivo de S2
Configuramos el servidor S2 utilizando una imagen de PHP-FPM sobre Alpine Linux para procesar la lógica dinámica de la aplicación. Su función principal es ejecutar el código de extagram.php, conectarse a la base de datos S7 para consultar los posts y generar el contenido HTML que se enviará de vuelta al balanceador S1.

Este nodo forma parte del clúster de Alta Disponibilidad. Si este contenedor fallara, el balanceador S1 redirigiría el tráfico automáticamente al nodo S3, garantizando que el servicio nunca se interrumpa.

## Configuración y Funcionamiento de S2
- **Despliegue del Contenedor:** El contenedor se levanta mediante Docker Compose, conectándose a las tres redes necesarias (entrada, servicios y datos) para interactuar con todos los niveles de la arquitectura. Se utiliza un volumen para sincronizar el código fuente en tiempo real.
  ```sql
  # Comando equivalente en Docker Run (aunque se gestiona vía Compose)
  docker run -d \
    --name s1-s2-phpfpm-1 \
    --network red_entrada \
    --network red_servicios \
    --network red_datos \
    -v /home/ec2-user/sprint2/S2/src:/var/www/extagram:rw \
    php:8.2-fpm-alpine
  ```
- **Estructura del contenedor:**
  ```sql
  S2/
  └── src/
      └── extagram.php  # Lógica de conexión a BD y renderizado de posts    
  ```
  | Fichero | Función Técnica |
  |--------|------|
  | extagram.php | Procesador Dinámico: Consulta la tabla posts en S7 y genera el feed. Solicita las imágenes a través de la ruta /storage/ gestionada por S1. |
  | Dockerfile | Entorno PHP: Configura la imagen base e instala la extensión mysqli necesaria para la comunicación con la base de datos. |

- **Contenido de ficheros:**
